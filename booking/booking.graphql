type UserBooking {
  userid: ID!
  dates: [BookingDate!]!
}

type BookingDate {
  date: String!
  movies: [ID!]!
}

type DetailedUserBooking {
  userid: ID!
  dates: [DetailedBookingDate!]!
}

type DetailedBookingDate {
  date: String!
  movies: [MovieDetails!]!
}

type MovieDetails {
  id: ID!
  title: String
  director: String
  rating: Float
  error: String
}

type StatsMoviesForDate {
  date: String!
  movies: [StatsMovieCount!]!
}

type StatsMovieCount {
  movie: MovieDetails!
  count: Int!
}

type AddBookingResponse {
  message: String!
  date: String!
  movies: [ID!]!
}

type DeleteBookingResponse {
  message: String!
  userid: ID!
  date: String!
  movie: ID!
}

type Query {
  allBookings: [UserBooking!]!
  bookingsByUser(userid: ID!): UserBooking
  detailedBookingsByUser(userid: ID!): DetailedUserBooking
  statsMoviesForDate(date: String!): StatsMoviesForDate
}

type Mutation {
  addBooking(userid: ID!, date: String!, movies: [ID!]!): AddBookingResponse!
  deleteBooking(userid: ID!, date: String!, movieid: ID!): DeleteBookingResponse!
}

schema {
  query: Query
  mutation: Mutation
}
